import{_ as p}from"./CardElement.vue_vue_type_script_setup_true_lang.5fb3043e.js";import{_ as $}from"./AccountSettings.vue_vue_type_script_setup_true_lang.72019e0a.js";import{_ as g}from"./AddPaymentMethod.vue_vue_type_script_setup_true_lang.a7e2c0fc.js";import{_ as C}from"./PersonalAccessTokens.vue_vue_type_script_setup_true_lang.64fea9ee.js";import{d as A,B as P,r as f,a as n,c as a,e as u,t as s,f as d,w as _,u as m,m as S,F as k,A as T,C as U}from"./index.855284fc.js";import"./BaseForm.vue_vue_type_script_setup_true_lang.cfd44047.js";import"./BaseButton.vue_vue_type_script_setup_true_lang.8c6a2ef1.js";const B={key:0},w={key:1},D={key:0},I=["onClick"],b={key:1},z=A({__name:"SettingsView",setup(N){const o=P(),h=e=>{e.email&&U.push({name:"confirm-email"})},c=f(!1),l=f([]);o.getPersonalAccessTokens().then(e=>l.value=e);const y=e=>{l.value.push(e)},v=e=>{o.deletePersonalAccessToken(e);const r=l.value.findIndex(t=>t.id===e);l.value.splice(r)};return(e,r)=>(n(),a(k,null,[u("h1",null,s(e.$t("My Account")),1),d(p,{title:e.$t("Settings")},{default:_(()=>[d($,{onUpdated:h})]),_:1},8,["title"]),d(p,{title:e.$t("Payment methods")},{default:_(()=>{var t;return[(t=m(o).user)!=null&&t.pm_type?(n(),a("div",B,[u("p",null,s(e.$t("Default payment method"))+": "+s(m(o).user.pm_type.toUpperCase())+" **** "+s(m(o).user.pm_last_four),1)])):(n(),a("div",w,[u("p",null,s(e.$t("You do not have a default payment method set")),1)])),c.value?(n(),S(g,{key:2,onSuccess:r[0]||(r[0]=i=>{c.value=!1,m(o).getUser()})})):(n(),a("button",{key:3,"data-cy":"add-payment-button",onClick:r[1]||(r[1]=i=>c.value=!0)},s(e.$t("Add a payment method")),1))]}),_:1},8,["title"]),d(p,{title:"API"},{default:_(()=>[l.value.length>0?(n(),a("ul",D,[(n(!0),a(k,null,T(l.value,t=>{var i;return n(),a("li",{key:"token-"+t.id},[u("strong",null,s((i=t.name)!=null?i:"Untitled token")+": ",1),u("span",null,"created "+s(t.created_at),1),u("button",{onClick:V=>v(t.id)},"Delete",8,I)])}),128))])):(n(),a("p",b,s(e.$t("You have no API access tokens.")),1)),d(C,{onCreated:y})]),_:1})],64))}});export{z as default};

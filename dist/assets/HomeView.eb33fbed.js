import{_ as C}from"./BaseButton.vue_vue_type_script_setup_true_lang.8c6a2ef1.js";import{d as P,r as h,o as S,a as v,c as k,b as w,e as T,f as a,g as b,w as o,h as E,i as D,j as F,F as q,t as A,k as y,l as B,m as L,u as V,_ as p,n as H,p as G,s as K,q as N,v as j,x as U}from"./index.855284fc.js";import{_ as W}from"./CardElement.vue_vue_type_script_setup_true_lang.5fb3043e.js";const z=["aria-busy"],J=["open","onKeydown"],Q=["aria-label"],R=P({__name:"BaseModal",props:{title:{type:String,required:!0},allowBackgroundClickToClose:{type:Boolean,required:!1,default:!0},showFooter:{type:Boolean,required:!1,default:!0},showCloseInHeader:{type:Boolean,required:!1,default:!0},showTrigger:{type:Boolean,required:!1,default:!0},triggerText:{type:String,required:!1,default:null}},emits:["opened","closed"],setup(r,{expose:d,emit:l}){const m=r,e=h(!1),n="modal-"+Math.random().toString(36).substring(2,15),s="modal-is-open",i="modal-is-opening",_="modal-is-closing",c=400,$=()=>{e.value||(e.value=!0,document.documentElement.classList.add(s,i),setTimeout(()=>{document.documentElement.classList.remove(i),l("opened")},c))},f=()=>{!e.value||(document.documentElement.classList.add(_),setTimeout(()=>{document.documentElement.classList.remove(_,s),e.value=!1,l("closed")},c))},M=u=>{!m.allowBackgroundClickToClose||u.target===u.currentTarget&&f()};return S(()=>{f()}),d({isModalOpen:e,openModal:$,closeModal:f}),(u,t)=>(v(),k(q,null,[w(u.$slots,"trigger",{openModal:$,isOpen:e.value},()=>{var g;return[r.showTrigger?(v(),k("button",{key:0,class:"contrast","data-target":n,onClick:t[0]||(t[0]=O=>$()),"aria-busy":e.value},A((g=r.triggerText)!=null?g:r.title),9,z)):D("",!0)]}),T("dialog",{id:n,open:e.value,onClick:M,onKeydown:F(f,["esc"])},[a(W,{title:r.title},b({headerActions:o(()=>[r.showCloseInHeader?(v(),k("a",{key:0,href:"#close","aria-label":u.$t("Close"),class:"close","data-target":n,onClick:t[1]||(t[1]=E(g=>f(),["prevent"]))},null,8,Q)):D("",!0)]),default:o(()=>[w(u.$slots,"default")]),_:2},[r.showFooter||u.$slots.footer?{name:"footer",fn:o(()=>[w(u.$slots,"footer",{},()=>[a(C,{class:"secondary","data-target":n,onClick:t[2]||(t[2]=E(g=>f(),["prevent"]))},{default:o(()=>[y(A(u.$t("Cancel")),1)]),_:1}),a(C,{"data-target":n,onClick:t[3]||(t[3]=E(g=>f(),["prevent"]))},{default:o(()=>[y(A(u.$t("Confirm")),1)]),_:1})])]),key:"0"}:void 0]),1032,["title"])],40,J)],64))}}),X=["onClick"],Y=P({__name:"ConfirmsPaymentMethod",emits:["confirmed"],setup(r,{emit:d}){const l=h(),m=h(!1),e=async()=>{if(m.value=!0,!await new H)return n();l.value.openModal()},n=()=>{d("confirmed"),l.value.closeModal()},s=B(()=>p(()=>import("./AddPaymentMethod.e87e31f5.js"),["assets/AddPaymentMethod.e87e31f5.js","assets/AddPaymentMethod.vue_vue_type_script_setup_true_lang.a7e2c0fc.js","assets/index.855284fc.js","assets/index.f1b3df20.css","assets/BaseForm.vue_vue_type_script_setup_true_lang.cfd44047.js","assets/BaseButton.vue_vue_type_script_setup_true_lang.8c6a2ef1.js"]));return(i,_)=>(v(),k("span",null,[T("span",{onClick:E(e,["prevent"])},[w(i.$slots,"default",{isConfirming:m.value})],8,X),a(R,{ref_key:"modal",ref:l,title:i.$t("Add a payment method"),showTrigger:!1,showFooter:!1,onClosed:_[0]||(_[0]=c=>m.value=!1)},{default:o(()=>{var c;return[(c=l.value)!=null&&c.isModalOpen?(v(),L(V(s),{key:0,onSuccess:n})):D("",!0)]}),_:1},8,["title"])]))}}),Z=["onClick"],I=P({__name:"ConfirmsGate",props:{title:{type:String,required:!0},gate:{type:[Array,String],required:!0}},emits:["confirmed"],setup(r,{emit:d}){const l=r,m=G(),e=h(),n=h(),s=h(!1),i=h(""),_=N(),c=async()=>{if(l.gate===void 0)return;s.value=!0;const t=await _(l.gate).handle();if((t==null?void 0:t.data)===void 0)return $();if(i.value=t.gate,t.data===!1&&!m["confirmationElement:"+i.value])return f();typeof t.data=="string"&&(e.value=t.data,u()),n.value.openModal()},$=()=>{d("confirmed"),n.value.closeModal()},f=()=>{n.value.closeModal()},M=K(),u=()=>{M.value=B(()=>U(Object.assign({"../../forms/AccountSettings.vue":()=>p(()=>import("./AccountSettings.9e39e68d.js"),["assets/AccountSettings.9e39e68d.js","assets/AccountSettings.vue_vue_type_script_setup_true_lang.72019e0a.js","assets/index.855284fc.js","assets/index.f1b3df20.css","assets/BaseForm.vue_vue_type_script_setup_true_lang.cfd44047.js","assets/BaseButton.vue_vue_type_script_setup_true_lang.8c6a2ef1.js"]),"../../forms/AddPaymentMethod.vue":()=>p(()=>import("./AddPaymentMethod.e87e31f5.js"),["assets/AddPaymentMethod.e87e31f5.js","assets/AddPaymentMethod.vue_vue_type_script_setup_true_lang.a7e2c0fc.js","assets/index.855284fc.js","assets/index.f1b3df20.css","assets/BaseForm.vue_vue_type_script_setup_true_lang.cfd44047.js","assets/BaseButton.vue_vue_type_script_setup_true_lang.8c6a2ef1.js"]),"../../forms/BaseForm.vue":()=>p(()=>import("./BaseForm.dce48112.js"),["assets/BaseForm.dce48112.js","assets/BaseForm.vue_vue_type_script_setup_true_lang.cfd44047.js","assets/index.855284fc.js","assets/index.f1b3df20.css","assets/BaseButton.vue_vue_type_script_setup_true_lang.8c6a2ef1.js"]),"../../forms/ConfirmPassword.vue":()=>p(()=>import("./ConfirmPassword.81ca67a1.js"),["assets/ConfirmPassword.81ca67a1.js","assets/ConfirmPassword.vue_vue_type_script_setup_true_lang.762bc0c9.js","assets/index.855284fc.js","assets/index.f1b3df20.css","assets/BaseForm.vue_vue_type_script_setup_true_lang.cfd44047.js","assets/BaseButton.vue_vue_type_script_setup_true_lang.8c6a2ef1.js"]),"../../forms/ForgotPassword.vue":()=>p(()=>import("./ForgotPassword.1e4aad29.js"),["assets/ForgotPassword.1e4aad29.js","assets/index.855284fc.js","assets/index.f1b3df20.css","assets/BaseForm.vue_vue_type_script_setup_true_lang.cfd44047.js","assets/BaseButton.vue_vue_type_script_setup_true_lang.8c6a2ef1.js"]),"../../forms/LoginOrRegister.vue":()=>p(()=>import("./LoginOrRegister.7e843783.js"),["assets/LoginOrRegister.7e843783.js","assets/LoginOrRegister.vue_vue_type_script_setup_true_lang.4efb078a.js","assets/index.855284fc.js","assets/index.f1b3df20.css","assets/BaseButton.vue_vue_type_script_setup_true_lang.8c6a2ef1.js","assets/BaseForm.vue_vue_type_script_setup_true_lang.cfd44047.js"]),"../../forms/PersonalAccessTokens.vue":()=>p(()=>import("./PersonalAccessTokens.7883fea2.js"),["assets/PersonalAccessTokens.7883fea2.js","assets/PersonalAccessTokens.vue_vue_type_script_setup_true_lang.64fea9ee.js","assets/index.855284fc.js","assets/index.f1b3df20.css","assets/BaseForm.vue_vue_type_script_setup_true_lang.cfd44047.js","assets/BaseButton.vue_vue_type_script_setup_true_lang.8c6a2ef1.js"]),"../../forms/ResetPassword.vue":()=>p(()=>import("./ResetPassword.a7826e11.js"),["assets/ResetPassword.a7826e11.js","assets/index.855284fc.js","assets/index.f1b3df20.css","assets/BaseForm.vue_vue_type_script_setup_true_lang.cfd44047.js","assets/BaseButton.vue_vue_type_script_setup_true_lang.8c6a2ef1.js"])}),`../../forms/${e.value}.vue`))};return(t,g)=>(v(),k("span",null,[T("span",{onClick:E(c,["prevent"])},[w(t.$slots,"default",{isConfirming:s.value})],8,Z),a(R,{ref_key:"modal",ref:n,title:r.title,showTrigger:!1,showFooter:!1,onClosed:g[0]||(g[0]=O=>s.value=!1)},{default:o(()=>[w(t.$slots,"confirmationElement:"+i.value,{success:c,fail:f},()=>{var O;return[e.value&&((O=n.value)==null?void 0:O.isModalOpen)?(v(),L(j(V(M)),{key:0,onSuccess:c},null,32)):D("",!0)]})]),_:3},8,["title"])]))}}),x=T("h1",null,"Home",-1),ee=P({__name:"TheWelcome",setup(r){const d=()=>{alert("action here")},l=()=>{alert("action here on ok payment")},m=(e,n,s)=>s?e():n();return(e,n)=>(v(),k("section",null,[x,a(I,{title:e.$t("Confirm your email"),gate:[{name:"auth",options:{shouldPass:!0}},"hasGivenCameraPermission"],onConfirmed:d},{"confirmationElement:hasGivenCameraPermission":o(({success:s,fail:i})=>[T("p",null,A(e.$t("Please confirm your email address to continue. Check your spam too. If you didn't get an email, you can ask us to send you a new one.")),1),a(C,{onClick:_=>m(s,i,!1)},{default:o(()=>[y("Fail")]),_:2},1032,["onClick"]),a(C,{onClick:_=>m(s,i,!0)},{default:o(()=>[y("Ok")]),_:2},1032,["onClick"])]),default:o(()=>[a(C,null,{default:o(()=>[y("Force unconfirmed email")]),_:1})]),_:1},8,["title"]),a(I,{title:e.$t("Connect"),gate:["auth","confirmedPassword","hasPaymentMethod"],onConfirmed:d},{default:o(()=>[a(C,null,{default:o(()=>[y("Do action when authed, confirmedPassword, and hasPaymentMethod")]),_:1})]),_:1},8,["title"]),a(Y,{onConfirmed:l},{default:o(({isConfirming:s})=>[a(C,{"aria-busy":s},{default:o(()=>[y("Do action when payment method confirmed ")]),_:2},1032,["aria-busy"])]),_:1}),a(I,{title:e.$t("Confirm your password"),gate:"auth",onConfirmed:d},{default:o(()=>[a(C,null,{default:o(()=>[y("Do action when password confirmed")]),_:1})]),_:1},8,["title"])]))}}),ae=P({__name:"HomeView",setup(r){return(d,l)=>(v(),k("main",null,[a(ee)]))}});export{ae as default};
